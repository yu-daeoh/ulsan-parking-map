<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>울산 공영주차장 지도</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css" />
  <style>
    html, body { height: 100%; margin: 0; padding: 0; }
    #map { width: 100%; height: 100%; }

    /* 범례 */
    .legend {
      background: white;
      padding: 8px;
      line-height: 1.6em;
      border-radius: 6px;
      font-size: 13px;
    }
    .legend span {
      display: inline-block;
      width: 12px;
      height: 12px;
      margin-right: 5px;
    }

    /* 주차(P) 마커 스타일 */
    .parking-marker {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      border: 2px solid white;
      box-shadow: 0 0 3px rgba(0, 0, 0, 0.4);
      display: flex;
      justify-content: center;
      align-items: center;
      color: white;
      font-weight: bold;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>

  <script>
    // ✅ 주차장 데이터
    const parkingData = [
  { "구": "동구", "주차장명": "화정지하", "주소": "대송로 140", "주차면수": 136, "구분": "유료", "시간": "08:00~19:00", "요금": "500원", "위도": 35.4958765, "경도": 129.4225676 },
  { "구": "동구", "주차장명": "서부", "주소": "서부로 40", "주차면수": 156, "구분": "유료", "시간": "09:00~18:00", "요금": "500원", "위도": 35.5266772, "경도": 129.4288339 },
  { "구": "동구", "주차장명": "일산복개천", "주소": "대송로 16", "주차면수": 83, "구분": "유료", "시간": "09:00~18:00", "요금": "500원", "위도": 35.503578, "경도": 129.4248989 },
  { "구": "동구", "주차장명": "남목 마성시장", "주소": "동부동 332-2", "주차면수": 86, "구분": "유료", "시간": "09:00~18:00", "요금": "500원", "위도": 35.53354, "경도": 129.44244 },
  { "구": "동구", "주차장명": "동울산종합시장", "주소": "진성3길 59", "주차면수": 96, "구분": "유료", "시간": "09:00~19:00", "요금": "500원", "위도": 35.5103587, "경도": 129.4261969 },
  { "구": "동구", "주차장명": "전하", "주소": "진성8길 119", "주차면수": 147, "구분": "유료", "시간": "08:00~22:00", "요금": "500원", "위도": 35.5099256, "경도": 129.4295951 },
  { "구": "동구", "주차장명": "명덕마을 복합문화광장", "주소": "명덕6길 38", "주차면수": 72, "구분": "유료", "시간": "09:00~18:00", "요금": "500원", "위도": 35.5266415, "경도": 129.4319094 },
  { "구": "동구", "주차장명": "월봉로", "주소": "월봉로 39 ~ 69", "주차면수": 34, "구분": "유료", "시간": "09:00~18:00", "요금": "500원", "위도": 35.4945794, "경도": 129.4231544 },
  { "구": "동구", "주차장명": "대학길제1", "주소": "대학길 29 ~ 95", "주차면수": 109, "구분": "유료", "시간": "09:00~18:00", "요금": "500원", "위도": 35.498087, "경도": 129.4243367 },
  { "구": "동구", "주차장명": "옥류로", "주소": "옥류로 11~49", "주차면수": 52, "구분": "유료", "시간": "09:00~18:00", "요금": "500원", "위도": 35.5442319, "경도": 129.4260562 },
  { "구": "남구", "주차장명": "번영교밑", "주소": "신정동 8-12", "주차면수": 64, "구분": "무료", "시간": "24시간", "요금": "-", "위도": 35.53487, "경도": 129.31199 },
  { "구": "남구", "주차장명": "보람병원앞", "주소": "삼산동 1554-1", "주차면수": 158, "구분": "유료", "시간": "08:00 ~ 23:00", "요금": "1,000원", "위도": 35.54126, "경도": 129.34388 },
  { "구": "남구", "주차장명": "태화강둔치", "주소": "신정로116번길 30", "주차면수": 253, "구분": "유료", "시간": "07:00 ~ 23:00", "요금": "1,000원", "위도": 35.5426869, "경도": 129.322379 },
  { "구": "남구", "주차장명": "무거섬들", "주소": "무거동 629-22", "주차면수": 96, "구분": "유료", "시간": "08:00 ~ 23:00", "요금": "1,000원", "위도": 35.5430751, "경도": 129.2549052 },
  { "구": "남구", "주차장명": "야음", "주소": "야음동 388-1", "주차면수": 75, "구분": "유료", "시간": "08:00 ~ 23:00", "요금": "1,000원", "위도": 35.5206393, "경도": 129.3364174 },
  { "구": "남구", "주차장명": "무거동", "주소": "대학로147번길 41-26", "주차면수": 143, "구분": "유료", "시간": "08:00 ~ 23:00", "요금": "1,000원", "위도": 35.552447, "경도": 129.2586721 },
  { "구": "남구", "주차장명": "옥동 구 법원부지", "주소": "옥동 635-3", "주차면수": 240, "구분": "유료", "시간": "09:00 ~ 18:00", "요금": "1,000원", "위도": 35.53356, "경도": 129.28564 },
  { "구": "남구", "주차장명": "왕생이", "주소": "달동 1345-6", "주차면수": 106, "구분": "유료", "시간": "08:00 ~ 23:00", "요금": "1,000원", "위도": 35.53588, "경도": 129.32397 },
  { "구": "남구", "주차장명": "선암철도 하부", "주소": "선암동 182-4", "주차면수": 29, "구분": "거주자 유료", "시간": "18:00 ~ 24:00", "요금": "-", "위도": 35.5157131, "경도": 129.3243602 },
  { "구": "중구", "주차장명": "옥교", "주소": "번영로 319", "주차면수": 586, "구분": "유료", "시간": "00:00~24:00", "요금": "30분 500원", "위도": 35.5664357, "경도": 129.3396376 },
  { "구": "중구", "주차장명": "구역전시장", "주소": "학성동 435-13", "주차면수": 63, "구분": "유료", "시간": "00:00~24:00", "요금": "30분 500원", "위도": 35.55442, "경도": 129.33824 },
  { "구": "중구", "주차장명": "우정1", "주소": "우정동 277-4", "주차면수": 83, "구분": "유료", "시간": "00:00~24:00", "요금": "30분 500원", "위도": 35.56212, "경도": 129.31018 },
  { "구": "중구", "주차장명": "반구", "주소": "반구동 448-9", "주차면수": 106, "구분": "유료", "시간": "00:00~24:00", "요금": "30분 500원", "위도": 35.55899, "경도": 129.3444 },
  { "구": "중구", "주차장명": "태화시장1", "주소": "태화동 24-4", "주차면수": 22, "구분": "유료", "시간": "00:00~24:00", "요금": "30분 500원", "위도": 35.5574486, "경도": 129.2965129 },
  { "구": "중구", "주차장명": "성남", "주소": "성남동 190-200", "주차면수": 268, "구분": "유료", "시간": "00:00~24:00", "요금": "30분 500원", "위도": 35.5538639, "경도": 129.3199317 },
  { "구": "중구", "주차장명": "도화공원", "주소": "복산동 205-1", "주차면수": 47, "구분": "무료", "시간": "24시간", "요금": "-", "위도": 35.56541, "경도": 129.33026 },
  { "구": "중구", "주차장명": "병영막창거리", "주소": "남외동 336", "주차면수": 18, "구분": "유료", "시간": "00:00~24:00", "요금": "30분 500원", "위도": 35.5686, "경도": 129.34695 },
  { "구": "북구", "주차장명": "상방복개천 노상", "주소": "연암동 417-4", "주차면수": 8, "구분": "유료", "시간": "10:00~19:00", "요금": "500원", "위도": 35.58073, "경도": 129.3694 },
  { "구": "북구", "주차장명": "양정복개천", "주소": "양정동 776-2", "주차면수": 57, "구분": "유료", "시간": "10:00~19:00", "요금": "500원", "위도": 35.54824, "경도": 129.39274 },
  { "구": "북구", "주차장명": "염포신전 노상", "주소": "염포동 967-1", "주차면수": 23, "구분": "유료", "시간": "10:00~19:00", "요금": "500원", "위도": 35.5394205, "경도": 129.3975041 },
  { "구": "북구", "주차장명": "화봉공원", "주소": "화봉동 445-1", "주차면수": 129, "구분": "유료", "시간": "24시간", "요금": "500원", "위도": 35.5907462, "경도": 129.3642069 },
  { "구": "북구", "주차장명": "호계시장", "주소": "호계동 678-5", "주차면수": 28, "구분": "유료", "시간": "24시간", "요금": "500원", "위도": 35.6260267, "경도": 129.3625452 },
  { "구": "북구", "주차장명": "강동중앙공원", "주소": "산하동 1002", "주차면수": 182, "구분": "무료", "시간": "24시간", "요금": "-", "위도": 35.63355, "경도": 129.42474 },
  { "구": "북구", "주차장명": "매곡1산업단지", "주소": "매곡동 349-3", "주차면수": 141, "구분": "무료", "시간": "24시간", "요금": "-", "위도": 35.6511104, "경도": 129.3665317 },
  { "구": "북구", "주차장명": "신천공영주차장", "주소": "신천동 344-5", "주차면수": 55, "구분": "무료", "시간": "24시간", "요금": "-", "위도": 35.63789, "경도": 129.3536 },
  { "구": "북구", "주차장명": "창평공영주차장", "주소": "창평동 1052-1", "주차면수": 90, "구분": "무료", "시간": "24시간", "요금": "-", "위도": 35.61201, "경도": 129.37298 },
  { "구": "북구", "주차장명": "중산산업단지1", "주소": "중산동 1253-4", "주차면수": 30, "구분": "무료", "시간": "24시간", "요금": "-", "위도": 35.66216, "경도": 129.35455 },
  { "구": "북구", "주차장명": "달천농공단지1", "주소": "달천동 212-8", "주차면수": 35, "구분": "무료", "시간": "24시간", "요금": "-", "위도": 35.6417128, "경도": 129.3190791 },
  { "구": "북구", "주차장명": "천곡동공영", "주소": "천곡동 551-2", "주차면수": 20, "구분": "무료", "시간": "24시간", "요금": "-", "위도": 35.6487237, "경도": 129.3262492 },
  { "구": "북구", "주차장명": "구암", "주소": "어물동 272-1", "주차면수": 43, "구분": "무료", "시간": "24시간", "요금": "-", "위도": 35.57223, "경도": 129.42486 },
  { "구": "북구", "주차장명": "금천부설", "주소": "당사동 527-8", "주차면수": 9, "구분": "무료", "시간": "24시간", "요금": "-", "위도": 35.59278, "경도": 129.45338 },
  { "구": "북구", "주차장명": "구유동일원", "주소": "구유동 355-3", "주차면수": 60, "구분": "무료", "시간": "24시간", "요금": "-", "위도": 35.60422, "경도": 129.4508 },
  { "구": "북구", "주차장명": "신명", "주소": "신명동 332-9", "주차면수": 24, "구분": "무료", "시간": "24시간", "요금": "-", "위도": 35.64776, "경도": 129.43945 },
  { "구": "북구", "주차장명": "모듈화산업단지제2", "주소": "효문동 986", "주차면수": 145, "구분": "무료", "시간": "24시간", "요금": "-", "위도": 35.57469, "경도": 129.37727 },
  { "구": "북구", "주차장명": "정자동 152-11 (임시공영주차장)", "주소": "정자동 152-11", "주차면수": 11, "구분": "무료", "시간": "24시간", "요금": "-", "위도": 35.61506, "경도": 129.44081 },
  { "구": "북구", "주차장명": "박상진호수공원제2", "주소": "송정동 1143", "주차면수": 134, "구분": "무료", "시간": "24시간", "요금": "-", "위도": 35.6019215, "경도": 129.3668462 }
];

    // ✅ 지도 초기화
    const map = L.map("map").setView([35.55, 129.35], 12);
    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // ✅ 마커 클러스터 그룹
    const markers = L.markerClusterGroup();

    // ✅ 색상 지정 함수
    function getColor(type) {
      if (type.includes("무료")) return "green";
      if (type.includes("거주자")) return "purple";
      return "blue";
    }

    // ✅ 마커 추가 (P 마커)
    parkingData.forEach(p => {
      const color = getColor(p.구분);

      const icon = L.divIcon({
        className: "",
        html: `<div class="parking-marker" style="background:${color}">P</div>`,
        iconSize: [28, 28],
        iconAnchor: [14, 28],
        popupAnchor: [0, -28]
      });

      const marker = L.marker([p.위도, p.경도], { icon }).bindPopup(`
        <b>${p.주차장명}</b><br>
        ${p.구} / ${p.주소}<br>
        주차면수: ${p.주차면수}면<br>
        구분: ${p.구분}<br>
        요금: ${p.요금}<br>
        운영시간: ${p.시간}
      `);

      markers.addLayer(marker);
    });

    map.addLayer(markers);

    // ✅ 범례
    const legend = L.control({ position: "bottomright" });
    legend.onAdd = function () {
      const div = L.DomUtil.create("div", "legend");
      div.innerHTML = `
        <div><span style="background: blue"></span> 유료</div>
        <div><span style="background: green"></span> 무료</div>
        <div><span style="background: purple"></span> 거주자</div>
      `;
      return div;
    };
    legend.addTo(map);
  </script>
</body>
</html>
